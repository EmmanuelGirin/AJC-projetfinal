---
#Create Config Map
apiVersion: v1
kind: ConfigMap
metadata:
 name: pgadmin-config
 namespace: icgroup
data:
 servers.json: |
   {
       "Servers": {
         "1": {
           "Name": "PostgreSQL DB",
           "Group": "Servers",
           "Port": 5432,
           "Username": "odoo",
           "Host": "odoo-postgres",
           "SSLMode": "prefer",
           "MaintenanceDB": "postgres",
         }
       }
   }
---
#Create Config Map
#apiVersion: v1
#kind: ConfigMap
#metadata:
# name: pgadmin-pass
# namespace: icgroup
#data:
# pass.txt: |
#   odoo-postgres:5432:postgres:odoo:odoo

#Create service to connnect from webapp to odoo
---
apiVersion: v1
kind: Service
metadata:
  namespace: icgroup
  name: pgadmin
  labels:
    app: pgadmin
    environment : production
spec:
  ports:
  - port: 80
    protocol: TCP
    targetPort: 80
    nodePort: 31002
  selector:
    app: pgadmin
    tier: frontend
  type: NodePort